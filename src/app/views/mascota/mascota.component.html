<div class="flex-container">
  <div id="Mes"></div>
</div>

<div class="flex-container" *ngIf="!loading">
  <div id="navButton"></div>
  <div>
    <button mat-raised-button (click)="abrirDialogo()" color="primary">
      Nueva mascota
    </button>
  </div>
</div>
<div class="mat-elevation-z4" *ngIf="!loading">
  <table mat-table [dataSource]="mascotasCliente">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef style="width: 10%">Id</th>
      <td mat-cell *matCellDef="let row">{{ row.id }}</td>
    </ng-container>

    <ng-container matColumnDef="avatar">
      <th mat-header-cell *matHeaderCellDef style="width: 20%">Avatar</th>
      <td mat-cell *matCellDef="let row">
        <img
          matPrefix
          src="{{ 'http://localhost:8080/mascotas/' + row.foto }}"
          width="24px"
          height="24px"
        />
      </td>
    </ng-container>
    
    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef>Nombre</th>
      <td mat-cell *matCellDef="let row">{{ row.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="especie">
      <th mat-header-cell *matHeaderCellDef>Especie</th>
      <td mat-cell *matCellDef="let row">{{ row.especie }}</td>
    </ng-container>

    <ng-container matColumnDef="edad">
      <th mat-header-cell *matHeaderCellDef>Edad(a√±os)</th>
      <td mat-cell *matCellDef="let row">{{ row.edad }}</td>
    </ng-container>

    <ng-container matColumnDef="historial">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="width: 20%; text-align: center"
      >
        Historial
      </th>
      <td mat-cell *matCellDef="let row" style="text-align: center">
        <a (click)="navigateToDiagnosticoCrud(row)">
          <i class="material-icons"> assignment</i>
        </a>
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="width: 20%; text-align: center"
      >
        Acciones
      </th>
      <td mat-cell *matCellDef="let row" style="text-align: center">
        <a class="detail" (click)="detailDialog(row)">
          <i class="material-icons"> visibility </i>
        </a>
        <a class="edit" (click)="updateDialog(row)">
          <i class="material-icons"> edit </i>
        </a>
        <a class="delete" (click)="borrarFila(row)">
          <i class="material-icons"> delete </i>
        </a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <div class="footer" #footer>
    <div class="p-d-flex p-ai-center p-jc-between">
      En total hay {{ mascotasCliente ? longitud : 0 }}
      {{ longitud === 1 ? "elemento" : "elementos" }}
    </div>
  </div>
</div>

<div *ngIf="loading" class="loading">
  <mat-spinner></mat-spinner>
</div>
